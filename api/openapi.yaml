# Governing: SPEC-0017 REQ-15 "OpenAPI Specification File", REQ-19 "Backward Compatibility"
openapi: "3.1.0"
info:
  title: Claude Ops API
  description: |
    REST API for the Claude Ops infrastructure monitoring and remediation agent.

    Claude Ops exposes three API surfaces at different base paths:

    | Surface | Base path | Authentication |
    |---------|-----------|----------------|
    | REST API | `/api/v1/` | None (same-host) |
    | OpenAI-compatible | `/v1/` | `Authorization: Bearer <CLAUDEOPS_CHAT_API_KEY>` |
    | Ollama-compatible | `/api/` | `Authorization: Bearer <CLAUDEOPS_CHAT_API_KEY>` |

    `/api/tags` and `/api/version` are always unauthenticated.
    `/v1/models` is always unauthenticated.
  version: "1.0.0"
  license:
    name: MIT

servers:
  - url: /
    description: All endpoints (paths below include full prefix)

paths:
  /api/v1/health:
    get:
      summary: Health check
      description: Returns the health status of the API server. Responds within 100ms.
      operationId: getHealth
      responses:
        "200":
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                required: [status]
                properties:
                  status:
                    type: string
                    example: ok
              example:
                status: ok

  /api/v1/sessions:
    get:
      summary: List sessions
      description: Returns sessions ordered by started_at descending with pagination.
      operationId: listSessions
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return.
          schema:
            type: integer
            default: 50
            minimum: 0
        - name: offset
          in: query
          description: Number of results to skip.
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        "200":
          description: A list of sessions
          content:
            application/json:
              schema:
                type: object
                required: [sessions]
                properties:
                  sessions:
                    type: array
                    items:
                      $ref: "#/components/schemas/Session"
              example:
                sessions:
                  - id: 1
                    tier: 1
                    model: haiku
                    status: completed
                    started_at: "2026-02-16T10:00:00Z"
                    ended_at: "2026-02-16T10:01:30Z"
                    exit_code: 0
                    cost_usd: 0.0042
                    num_turns: 5
                    duration_ms: 90000
                    trigger: scheduled
                    prompt_text: null
                    parent_session_id: null
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "limit must be non-negative"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/sessions/{id}:
    get:
      summary: Get session detail
      description: Returns a single session with its escalation chain (parent and children).
      operationId: getSession
      parameters:
        - name: id
          in: path
          required: true
          description: Session ID
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Session detail with escalation chain
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SessionDetail"
              example:
                id: 2
                tier: 2
                model: sonnet
                status: completed
                started_at: "2026-02-16T10:02:00Z"
                ended_at: "2026-02-16T10:03:00Z"
                exit_code: 0
                cost_usd: 0.012
                num_turns: 8
                duration_ms: 60000
                trigger: scheduled
                prompt_text: null
                parent_session_id: 1
                parent_session:
                  id: 1
                  tier: 1
                  model: haiku
                  status: completed
                  started_at: "2026-02-16T10:00:00Z"
                  ended_at: "2026-02-16T10:01:30Z"
                  exit_code: 0
                  cost_usd: 0.0042
                  num_turns: 5
                  duration_ms: 90000
                  trigger: scheduled
                  prompt_text: null
                  parent_session_id: null
                child_sessions: []
                chain_cost: 0.0162
                response: "## Session Summary\nAll checks passed."
        "400":
          description: Invalid session ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "invalid session id"
        "404":
          description: Session not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "session not found"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/sessions/trigger:
    post:
      summary: Trigger ad-hoc session
      description: Triggers an ad-hoc monitoring session with a custom prompt. Returns 409 if a session is already running.
      operationId: triggerSession
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [prompt]
              properties:
                prompt:
                  type: string
                  description: The prompt text for the ad-hoc session.
                  minLength: 1
                start_tier:
                  type: integer
                  description: Starting escalation tier (1=observe, 2=investigate, 3=remediate). Defaults to 1.
                  enum: [1, 2, 3]
                  default: 1
            example:
              prompt: "Check nginx status on ie01"
              start_tier: 1
      responses:
        "201":
          description: Session created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
              example:
                id: 42
                tier: 1
                model: haiku
                status: running
                started_at: "2026-02-16T12:00:00Z"
                ended_at: null
                exit_code: null
                cost_usd: null
                num_turns: null
                duration_ms: null
                trigger: manual
                prompt_text: "Check nginx status on ie01"
                parent_session_id: null
        "400":
          description: Missing or empty prompt
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "prompt is required"
        "409":
          description: A session is already running
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "a session is already in progress"
        "415":
          description: Unsupported content type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "Content-Type must be application/json"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/events:
    get:
      summary: List events
      description: Returns events ordered by created_at descending with optional level and service filters.
      operationId: listEvents
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return.
          schema:
            type: integer
            default: 100
            minimum: 0
        - name: offset
          in: query
          description: Number of results to skip.
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: level
          in: query
          description: Filter by event level (info, warning, critical).
          schema:
            type: string
            enum: [info, warning, critical]
        - name: service
          in: query
          description: Filter by service name.
          schema:
            type: string
      responses:
        "200":
          description: A list of events
          content:
            application/json:
              schema:
                type: object
                required: [events]
                properties:
                  events:
                    type: array
                    items:
                      $ref: "#/components/schemas/Event"
              example:
                events:
                  - id: 10
                    session_id: 1
                    level: warning
                    service: nginx
                    message: "High response time detected"
                    created_at: "2026-02-16T10:01:00Z"
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "limit must be non-negative"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/memories:
    get:
      summary: List memories
      description: Returns memories ordered by confidence descending with optional service and category filters.
      operationId: listMemories
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return.
          schema:
            type: integer
            default: 200
            minimum: 0
        - name: offset
          in: query
          description: Number of results to skip.
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: service
          in: query
          description: Filter by service name.
          schema:
            type: string
        - name: category
          in: query
          description: Filter by memory category.
          schema:
            type: string
      responses:
        "200":
          description: A list of memories
          content:
            application/json:
              schema:
                type: object
                required: [memories]
                properties:
                  memories:
                    type: array
                    items:
                      $ref: "#/components/schemas/Memory"
              example:
                memories:
                  - id: 1
                    service: nginx
                    category: config
                    observation: "Listens on port 8080"
                    confidence: 0.9
                    active: true
                    created_at: "2026-02-15T08:00:00Z"
                    updated_at: "2026-02-16T10:00:00Z"
                    session_id: 5
                    tier: 1
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "offset must be non-negative"
        "500":
          $ref: "#/components/responses/InternalError"

    post:
      summary: Create memory
      description: Creates a new memory record. Defaults confidence to 0.7 and active to true if not provided.
      operationId: createMemory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MemoryCreate"
            example:
              service: nginx
              category: config
              observation: "Listens on port 8080"
              confidence: 0.9
              active: true
      responses:
        "201":
          description: Memory created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Memory"
              example:
                id: 5
                service: nginx
                category: config
                observation: "Listens on port 8080"
                confidence: 0.9
                active: true
                created_at: "2026-02-16T12:00:00Z"
                updated_at: "2026-02-16T12:00:00Z"
                session_id: null
                tier: 0
        "400":
          description: Missing required fields
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "category and observation are required"
        "415":
          description: Unsupported content type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "Content-Type must be application/json"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/memories/{id}:
    put:
      summary: Update memory
      description: Updates an existing memory's observation, confidence, and active status.
      operationId: updateMemory
      parameters:
        - name: id
          in: path
          required: true
          description: Memory ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MemoryUpdate"
            example:
              observation: "Updated observation text"
              confidence: 0.85
              active: true
      responses:
        "200":
          description: Memory updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Memory"
              example:
                id: 5
                service: nginx
                category: config
                observation: "Updated observation text"
                confidence: 0.85
                active: true
                created_at: "2026-02-16T12:00:00Z"
                updated_at: "2026-02-16T12:30:00Z"
                session_id: null
                tier: 0
        "400":
          description: Invalid request body or missing fields
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "observation, confidence, and active are required"
        "404":
          description: Memory not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "memory not found"
        "415":
          description: Unsupported content type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "Content-Type must be application/json"
        "500":
          $ref: "#/components/responses/InternalError"

    delete:
      summary: Delete memory
      description: Deletes a memory record by ID.
      operationId: deleteMemory
      parameters:
        - name: id
          in: path
          required: true
          description: Memory ID
          schema:
            type: integer
            format: int64
      responses:
        "204":
          description: Memory deleted (no content)
        "404":
          description: Memory not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "memory not found"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/cooldowns:
    get:
      summary: List cooldowns
      description: Returns cooldown action summaries within the last 24 hours, ordered by last_action descending.
      operationId: listCooldowns
      responses:
        "200":
          description: A list of cooldown summaries
          content:
            application/json:
              schema:
                type: object
                required: [cooldowns]
                properties:
                  cooldowns:
                    type: array
                    items:
                      $ref: "#/components/schemas/Cooldown"
              example:
                cooldowns:
                  - service: nginx
                    action_type: restart
                    count: 2
                    last_action: "2026-02-16T11:30:00Z"
        "500":
          $ref: "#/components/responses/InternalError"

  /api/v1/config:
    get:
      summary: Get configuration
      description: Returns the current runtime configuration.
      operationId: getConfig
      responses:
        "200":
          description: Current configuration
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Config"
              example:
                interval: 3600
                tier1_model: haiku
                tier2_model: sonnet
                tier3_model: opus
                dry_run: false
                max_tier: 3
                state_dir: /state
                results_dir: /results
                repos_dir: /repos
        "500":
          $ref: "#/components/responses/InternalError"

    put:
      summary: Update configuration
      description: Updates runtime configuration. Only provided fields are changed; omitted fields retain their current values.
      operationId: updateConfig
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConfigUpdate"
            example:
              interval: 1800
              dry_run: true
      responses:
        "200":
          description: Updated configuration
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Config"
              example:
                interval: 1800
                tier1_model: haiku
                tier2_model: sonnet
                tier3_model: opus
                dry_run: true
                max_tier: 3
                state_dir: /state
                results_dir: /results
                repos_dir: /repos
        "400":
          description: Invalid configuration value
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "interval must be a positive integer"
        "415":
          description: Unsupported content type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error: "Content-Type must be application/json"
        "500":
          $ref: "#/components/responses/InternalError"

  # ─── OpenAI-compatible chat API (/v1/) ─────────────────────────────────────
  # Clients that already speak OpenAI can point their base URL at this server.
  # Authentication: Authorization: Bearer <CLAUDEOPS_CHAT_API_KEY>

  /v1/models:
    get:
      summary: List chat models
      description: Returns the available claude-ops model IDs in OpenAI format. Unauthenticated.
      operationId: listModels
      tags: [OpenAI-compatible]
      responses:
        "200":
          description: Model list
          content:
            application/json:
              schema:
                type: object
                properties:
                  object:
                    type: string
                    example: list
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        object:
                          type: string
                        owned_by:
                          type: string
              example:
                object: list
                data:
                  - id: claude-ops
                    object: model
                    owned_by: claude-ops
                  - id: claude-ops-tier1
                    object: model
                    owned_by: claude-ops
                  - id: claude-ops-tier2
                    object: model
                    owned_by: claude-ops
                  - id: claude-ops-tier3
                    object: model
                    owned_by: claude-ops

  /v1/chat/completions:
    post:
      summary: Chat completion
      description: |
        Triggers an ad-hoc Claude Ops session from a chat message and streams
        or returns the session output in OpenAI format.

        Model IDs map to starting tiers:
        - `claude-ops` / `claude-ops-tier1` → Tier 1 (Observe, full escalation chain)
        - `claude-ops-tier2` → Tier 2 (Safe remediation)
        - `claude-ops-tier3` → Tier 3 (Full remediation)

        The `claude-ops` model starts at Tier 1 and will escalate to Tier 2
        or Tier 3 automatically if the situation requires it.
      operationId: createChatCompletion
      tags: [OpenAI-compatible]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [messages]
              properties:
                model:
                  type: string
                  description: Model ID (controls starting tier). Defaults to claude-ops.
                  example: claude-ops
                messages:
                  type: array
                  items:
                    type: object
                    required: [role, content]
                    properties:
                      role:
                        type: string
                        enum: [user, assistant, system]
                      content:
                        type: string
                stream:
                  type: boolean
                  description: If true, response is streamed as SSE chunks.
                  default: false
            example:
              model: claude-ops
              messages:
                - role: user
                  content: "Jellyfin is responding slowly, can you investigate?"
              stream: false
      responses:
        "200":
          description: Session output (sync or SSE stream)
        "401":
          description: Invalid API key
        "429":
          description: A session is already running
        "503":
          description: Chat endpoint disabled (CLAUDEOPS_CHAT_API_KEY not set)

  # ─── Ollama-compatible API (/api/) ─────────────────────────────────────────
  # Clients that speak the Ollama protocol can point their base URL at this
  # server.  /api/version and /api/tags are unauthenticated; /api/chat and
  # /api/generate require the same CLAUDEOPS_CHAT_API_KEY if set.

  /api/version:
    get:
      summary: Server version
      description: Returns version information. Unauthenticated. Compatible with Ollama GET /api/version.
      operationId: ollamaVersion
      tags: [Ollama-compatible]
      responses:
        "200":
          description: Version string
          content:
            application/json:
              example:
                version: claude-ops

  /api/tags:
    get:
      summary: List models (Ollama format)
      description: Returns available models in Ollama /api/tags format. Unauthenticated.
      operationId: ollamaListModels
      tags: [Ollama-compatible]
      responses:
        "200":
          description: Model list in Ollama format
          content:
            application/json:
              example:
                models:
                  - name: claude-ops:latest
                    model: claude-ops:latest
                    modified_at: "2025-01-01T00:00:00Z"
                    size: 0

  /api/chat:
    post:
      summary: Chat completion (Ollama format)
      description: |
        Triggers an ad-hoc session using the Ollama chat request format.
        Streams NDJSON by default (one JSON object per line); set `stream: false`
        for a single response object.
      operationId: ollamaChat
      tags: [Ollama-compatible]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model:
                  type: string
                  example: claude-ops
                messages:
                  type: array
                  items:
                    type: object
                    properties:
                      role:
                        type: string
                      content:
                        type: string
                stream:
                  type: boolean
            example:
              model: claude-ops
              messages:
                - role: user
                  content: "Is nginx healthy on ie01?"
              stream: true
      responses:
        "200":
          description: NDJSON stream or single JSON response

  /api/generate:
    post:
      summary: Generate completion (Ollama format)
      description: |
        Triggers an ad-hoc session using the Ollama generate (text-completion) request format.
        Uses the `prompt` field instead of `messages`.
      operationId: ollamaGenerate
      tags: [Ollama-compatible]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model:
                  type: string
                  example: claude-ops
                prompt:
                  type: string
                stream:
                  type: boolean
            example:
              model: claude-ops
              prompt: "Check disk space on ie01"
              stream: false
      responses:
        "200":
          description: NDJSON stream or single JSON response

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      description: |
        API key set via CLAUDEOPS_CHAT_API_KEY environment variable.
        Used by the OpenAI-compatible and Ollama-compatible endpoints.
  responses:
    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error: "internal server error"

  schemas:
    Session:
      type: object
      required:
        - id
        - tier
        - model
        - status
        - started_at
        - trigger
      properties:
        id:
          type: integer
          format: int64
          description: Unique session identifier.
        tier:
          type: integer
          description: Escalation tier (1=observe, 2=investigate, 3=remediate).
          enum: [1, 2, 3]
        model:
          type: string
          description: Claude model used for this session.
          example: haiku
        status:
          type: string
          description: Current session status.
          enum: [running, completed, failed, timed_out, escalated]
        started_at:
          type: string
          format: date-time
          description: When the session started.
        ended_at:
          type: ["string", "null"]
          format: date-time
          description: When the session ended, or null if still running.
        exit_code:
          type: ["integer", "null"]
          description: Process exit code, or null if still running.
        cost_usd:
          type: ["number", "null"]
          format: double
          description: Total API cost in USD, or null if not yet computed.
        num_turns:
          type: ["integer", "null"]
          description: Number of conversation turns, or null if not yet computed.
        duration_ms:
          type: ["integer", "null"]
          format: int64
          description: Duration in milliseconds, or null if still running.
        trigger:
          type: string
          description: How the session was started.
          enum: [scheduled, manual, escalation]
        prompt_text:
          type: ["string", "null"]
          description: Custom prompt for ad-hoc sessions, or null for scheduled.
        parent_session_id:
          type: ["integer", "null"]
          format: int64
          description: ID of the parent session if this was an escalation, or null.

    SessionDetail:
      allOf:
        - $ref: "#/components/schemas/Session"
        - type: object
          properties:
            parent_session:
              oneOf:
                - $ref: "#/components/schemas/Session"
                - type: "null"
              description: The parent session object if this session was escalated.
            child_sessions:
              type: array
              items:
                $ref: "#/components/schemas/Session"
              description: Direct child sessions spawned by escalation.
            chain_cost:
              type: number
              format: double
              description: Total cost across the entire escalation chain.
            response:
              type: ["string", "null"]
              description: Final markdown response from the session.

    Event:
      type: object
      required:
        - id
        - level
        - message
        - created_at
      properties:
        id:
          type: integer
          format: int64
          description: Unique event identifier.
        session_id:
          type: ["integer", "null"]
          format: int64
          description: ID of the session that produced this event.
        level:
          type: string
          description: Event severity level.
          enum: [info, warning, critical]
        service:
          type: ["string", "null"]
          description: Service name associated with the event.
        message:
          type: string
          description: Event message text.
        created_at:
          type: string
          format: date-time
          description: When the event was created.

    Memory:
      type: object
      required:
        - id
        - category
        - observation
        - confidence
        - active
        - created_at
        - updated_at
        - tier
      properties:
        id:
          type: integer
          format: int64
          description: Unique memory identifier.
        service:
          type: ["string", "null"]
          description: Service this memory relates to, or null for general.
        category:
          type: string
          description: Memory category.
        observation:
          type: string
          description: The observation text.
        confidence:
          type: number
          format: double
          description: Confidence score between 0 and 1.
          minimum: 0
          maximum: 1
        active:
          type: boolean
          description: Whether this memory is active.
        created_at:
          type: string
          format: date-time
          description: When the memory was created.
        updated_at:
          type: string
          format: date-time
          description: When the memory was last updated.
        session_id:
          type: ["integer", "null"]
          format: int64
          description: ID of the session that created this memory.
        tier:
          type: integer
          description: Tier of the session that created this memory.

    MemoryCreate:
      type: object
      required:
        - category
        - observation
      properties:
        service:
          type: string
          description: Service this memory relates to.
        category:
          type: string
          description: Memory category.
        observation:
          type: string
          description: The observation text.
        confidence:
          type: number
          format: double
          description: Confidence score between 0 and 1. Defaults to 0.7.
          minimum: 0
          maximum: 1
          default: 0.7
        active:
          type: boolean
          description: Whether this memory is active. Defaults to true.
          default: true

    MemoryUpdate:
      type: object
      required:
        - observation
        - confidence
        - active
      properties:
        observation:
          type: string
          description: Updated observation text.
        confidence:
          type: number
          format: double
          description: Updated confidence score between 0 and 1.
          minimum: 0
          maximum: 1
        active:
          type: boolean
          description: Whether this memory is active.

    Cooldown:
      type: object
      required:
        - service
        - action_type
        - count
        - last_action
      properties:
        service:
          type: string
          description: Service name.
        action_type:
          type: string
          description: Type of remediation action.
          enum: [restart, redeployment]
        count:
          type: integer
          description: Number of actions in the current window.
        last_action:
          type: string
          format: date-time
          description: Timestamp of the most recent action.

    Config:
      type: object
      required:
        - interval
        - tier1_model
        - tier2_model
        - tier3_model
        - dry_run
        - max_tier
        - state_dir
        - results_dir
        - repos_dir
      properties:
        interval:
          type: integer
          description: Monitoring loop interval in seconds.
          example: 3600
        tier1_model:
          type: string
          description: Model for Tier 1 (observe) sessions.
          example: haiku
        tier2_model:
          type: string
          description: Model for Tier 2 (investigate) sessions.
          example: sonnet
        tier3_model:
          type: string
          description: Model for Tier 3 (remediate) sessions.
          example: opus
        dry_run:
          type: boolean
          description: Whether the agent is in observe-only mode.
        max_tier:
          type: integer
          description: Maximum escalation tier allowed.
          example: 3
        state_dir:
          type: string
          description: Path to the state directory.
          example: /state
        results_dir:
          type: string
          description: Path to the results directory.
          example: /results
        repos_dir:
          type: string
          description: Path to the repos directory.
          example: /repos

    ConfigUpdate:
      type: object
      properties:
        interval:
          type: integer
          description: Monitoring loop interval in seconds. Must be positive.
          minimum: 1
        tier1_model:
          type: string
          description: Model for Tier 1 (observe) sessions.
        tier2_model:
          type: string
          description: Model for Tier 2 (investigate) sessions.
        tier3_model:
          type: string
          description: Model for Tier 3 (remediate) sessions.
        dry_run:
          type: boolean
          description: Whether the agent is in observe-only mode.

    Error:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: Human-readable error message.
